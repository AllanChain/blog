<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Python the Language | AC&#39;s Blog</title>
    <link rel="stylesheet" href="https://allanchain.github.io/blog/css/style.css" />
    <link rel="stylesheet" href="https://allanchain.github.io/blog/css/fonts.css" />
    <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/solarized-dark.min.css" rel="stylesheet">

  </head>

  <body class="page">
    <nav class="header">
      <div class="banner">
<a href="https://allanchain.github.io/blog/" class="text">
&Afr;&Cfr;'&Sfr; &Bfr;&Lfr;&Ofr;&Gfr;
</a>
</div>

      <div class="head-meta">
      
        <span><a href="https://allanchain.github.io/blog/">&larr; Home</a></span>
        <span class="date">2018-11-04</span>
        
        
        
          
        
        
        
        <span><a href="https://github.com/AllanChain/blog/edit/master/content/post/python.md">Edit &rarr;</a></span>
        
        
      
      </div>
    </nav>

<div class="container">
<article>
<div class="article-meta">

  <div class="categories">
  
    <a href="https://allanchain.github.io/blog/categories/python">Python</a>
  
  </div>

  <h1><span class="title">Python the Language</span></h1>

  
  <h3 class="author">Allan Chain
</h3>
  

  
  

</div>


<ul >
    

    
    
    <li>
      <a href="#interesting-things-about-class">Interesting Things About Class</a>
    

    
    </li>
        <li>
          <a href="#python-exceptions">Python Exceptions</a>
    

    
    </li>
        <li>
          <a href="#slicing">Slicing</a>
    

    
    <ul><ul>
        <li>
          <a href="#here-is-a-valid-slice">Here is a valid slice</a>
    

    
    </li>
        <li>
          <a href="#a-valid-way-to-create-a-slice">a valid way to create a slice</a>
    

    
    </li>
        <li>
          <a href="#the-invalid-way">the invalid way</a>
    

    
    </li>
        <li>
          <a href="#cooperate-with-class">cooperate with class</a>
    

    
    </li></ul></li></li></ul></li>
        <li>
          <a href="#iter-take-callable-argument">iter take callable argument</a>
    

    
    </li>
        <li>
          <a href="#method-missing">method __missing__</a>
    

    
    </li>
        <li>
          <a href="#the-pth-file">The .pth file</a>
    

    
    </li>
        <li>
          <a href="#hidden-features-of-python">Hidden features of Python</a></ul>


<main>


<p>Notes for python language itself.</p>

<h2 id="interesting-things-about-class">Interesting Things About Class</h2>

<p>Let&rsquo;s have a look at the following code first:</p>

<pre><code class="language-python">class A:
    def printf(*args):
        print(args)
def printff(*args):
    print(args)

a=A()
a.printf()
print ('-'*5,a.printf)

A.printf=printff
a.printf()
print ('-'*5,a.printf)

A.printf=print
a.printf()
print ('-'*5,a.printf)

a.printf=printff
a.printf()
print ('-'*5,a.printf)

A.printf=printff
a.printf()
print ('-'*5,a.printf)
print ('-'*5,A.printf)

##Output
##(&lt;__main__.A object at 0x01371070&gt;,)
##----- &lt;bound method A.printf of &lt;__main__.A object at 0x01371070&gt;&gt;
##(&lt;__main__.A object at 0x01371070&gt;,)
##----- &lt;bound method A.printff of &lt;__main__.A object at 0x01371070&gt;&gt;
##
##----- &lt;built-in function print&gt;
##()
##----- &lt;function printff at 0x01795858&gt;
##()
##----- &lt;function printff at 0x01795858&gt;
##----- &lt;function printff at 0x01795858&gt;
</code></pre>

<p>And from this kind of behavior, I think I leart :</p>

<ul>
<li>The method defined in the class is called <code>bound method</code>.</li>
<li>The function specificly assigned to the class later will become its <code>bound method</code> too. And <strong>magically</strong>, the name will change to the function&rsquo;s name. What&rsquo;s more, when I call <code>a.printff</code> ,it throw an error.</li>
<li>The python interpreter treated built-in functions diffrently. Thus function <code>print</code> wound not become a <code>bound method</code>.</li>
<li>After the function is assign to the instance, it would not become a <code>bound method</code>, but rather simply a function.</li>
<li><del>After a function is assign to the instance, the corresponding <code>bound method</code> in the class would magically change.</del></li>
<li>After a function is assign to the instance, the <strong>behavoir</strong> when assigning functions again to an class would <strong>magically</strong> change.</li>
<li>(Though I <strong>really don&rsquo;t</strong> know some of them ,I think I&rsquo;d better put them down)</li>
</ul>

<h2 id="python-exceptions">Python Exceptions</h2>

<p>I encountered this problem when writing <code>nb.py</code>. I wrote<code>except Exception:</code> instead of <code>except KeyboardInterrupt:</code> ,and it did not catch the KeyboardInterrupt as I expected. But now I figured out that KeyboardInterrupt is not included in Exception:</p>

<pre><code class="language-shell">BaseException
+-- SystemExit
+-- KeyboardInterrupt
+-- GeneratorExit
+-- Exception
    +-- ...
	+-- ...
</code></pre>

<h2 id="slicing">Slicing</h2>

<h4 id="here-is-a-valid-slice">Here is a valid slice</h4>

<pre><code class="language-python">s='jksahgijsdhgedhjgkh'
print(s[5:999])

##Output
##gijsdhgedhjgkh
</code></pre>

<h4 id="a-valid-way-to-create-a-slice">a valid way to create a slice</h4>

<pre><code class="language-python">a=slice(1,5,2)
print(a.start)
print(a.stop,a.step)

##Output
##1
##5 2
</code></pre>

<h4 id="the-invalid-way">the invalid way</h4>

<pre><code class="language-python">a=[1:3:4]

##Output
##SyntaxError
</code></pre>

<h4 id="cooperate-with-class">cooperate with class</h4>

<pre><code class="language-python">class A:
    def __getitem__(self,arg):
	    print(arg)
		return 
a=A()
b=a[123,...,1:3:5,[1,2,3]]

##Output
##(123, Ellipsis, slice(1, 3, 5), [1, 2, 3])
</code></pre>

<h2 id="iter-take-callable-argument">iter take callable argument</h2>

<pre><code>def seek_next_line(f):
    for c in iter(lambda: f.read(1),'\n'):
	        pass
</code></pre>

<p>The <code>iter(callable, until_value)</code> function repeatedly calls callable and yields its result until <code>until_value</code> is returned.</p>

<h2 id="method-missing">method <code>__missing__</code></h2>

<p>From 2.5 onwards dicts have a special method <code>__missing__</code> that is invoked for missing items:</p>

<pre><code class="language-python">&gt;&gt;&gt; class MyDict(dict):
...  def __missing__(self, key):
...   self[key] = rv = []
...   return rv
...
&gt;&gt;&gt; m = MyDict()
&gt;&gt;&gt; m[&quot;foo&quot;].append(1)
&gt;&gt;&gt; m[&quot;foo&quot;].append(2)
&gt;&gt;&gt; dict(m)
{'foo': [1, 2]}
</code></pre>

<p>There is also a dict subclass in collections called defaultdict that does pretty much the same but calls a function without arguments for not existing items:</p>

<pre><code class="language-python">&gt;&gt;&gt; from collections import defaultdict
&gt;&gt;&gt; m = defaultdict(list)
&gt;&gt;&gt; m[&quot;foo&quot;].append(1)
&gt;&gt;&gt; m[&quot;foo&quot;].append(2)
&gt;&gt;&gt; dict(m)
{'foo': [1, 2]}
</code></pre>

<p>I recommend converting such dicts to regular dicts before passing them to functions that don&rsquo;t expect such subclasses. A lot of code uses <code>d[a_key]</code> and catches KeyErrors to check if an item exists which would add a new item to the dict.</p>

<h2 id="the-pth-file">The <code>.pth</code> file</h2>

<p>To add more python modules (espcially 3rd party ones), most people seem to use <code>PYTHONPATH</code> environment variables or they add symlinks or directories in their site-packages directories. Another way, is to use <code>*.pth</code> files. Here&rsquo;s the official python doc&rsquo;s explanation:</p>

<blockquote>
<p>The most convenient way [to modify python&rsquo;s search path] is to add a path configuration file to a directory that&rsquo;s already on Python&rsquo;s path, usually to the &hellip;/site-packages/ directory. Path configuration files have an extension of .pth, and each line must contain a single path that will be appended to sys.path. (Because the new paths are appended to sys.path, modules in the added directories will not override standard modules. This means you can&rsquo;t use this mechanism for installing fixed versions of standard modules.)</p>
</blockquote>

<h2 id="hidden-features-of-python">Hidden features of Python</h2>

<p>What are the lesser-known but useful features of the Python programming language?</p>

<p>Discussion at <a href="https://stackoverflow.com/questions/101268/hidden-features-of-python">https://stackoverflow.com/questions/101268/hidden-features-of-python</a></p>

</main>














<nav class="post-nav">
  <span class="nav-prev"><a href="https://allanchain.github.io/blog/post/2019/02/08/read-the-character-straight/">&larr; Read the Character Straight</a></span>
  <span class="nav-next"><a href="https://allanchain.github.io/blog/post/2018/11/04/termux-error-handling/">Termux Error Handling &rarr;</a></span>
</nav>



</article>
</div>

<script async src="//yihui.name/js/center-img.js"></script>

<footer>

<div class="footer">
  <ul class="menu">
    
    <li><a href="https://allanchain.github.io/blog/"><span data-hover="Home">Home</span></a></li>
    
    <li><a href="https://allanchain.github.io/blog/about/"><span data-hover="About">About</span></a></li>
    
    <li><a href="https://allanchain.github.io/blog/categories/"><span data-hover="Categories">Categories</span></a></li>
    
    <li><a href="https://allanchain.github.io/blog/tags/"><span data-hover="Tags">Tags</span></a></li>
    
  </ul>
  
  <div class="copyright">Powered by hugo and hugo-xmag theme</div>
  
</div>
</footer>


<script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>




</body>
</html>

